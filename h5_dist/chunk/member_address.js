(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"673":function(e,t,n){},"779":function(e,t,n){"use strict";n.r(t);var a,r=n(3),s=n(346),c=n(4),i=n.n(c),o=n(735),d=n(416),l=n(47),u=n(352),m=n(17),f=n(6),p=(n(673),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(a,r){try{var s=t[a](r),c=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(c).then(function(e){step("next",e)},function(e){step("throw",e)});e(c)}("next")})}}var h="address_id";t.default=Object(l.b)(function(e){return{"address":e.address.current}},function(e){return{"onAddressChoose":function onAddressChoose(t){return e({"type":"address/choose","payload":t})}}})(a=function(e){function AddressIndex(e){var t=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AddressIndex);var n,a,s=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AddressIndex.__proto__||Object.getPrototypeOf(AddressIndex)).call(this,e));return s.handleClickChecked=function(e){s.setState({"selectedId":e[h]}),s.props.onAddressChoose(e),setTimeout(function(){r.a.navigateBack()},700)},s.handleChangeDefault=(n=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e.is_def=1,t.prev=1,t.next=4,f.a.member.addressCreateOrUpdate(e);case 4:e.address_id&&m.a.toast("修改成功"),setTimeout(function(){s.fetch()},700),t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",!1);case 11:case"end":return t.stop()}},_callee,t,[[1,8]])})),function(e){return n.apply(this,arguments)}),s.handleClickToEdit=function(e){e.address_id?r.a.navigateTo({"url":"/pages/member/edit-address?address_id="+e.address_id}):r.a.navigateTo({"url":"/pages/member/edit-address"})},s.handleDelete=(a=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){return regeneratorRuntime.wrap(function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.member.addressDelete(e.address_id);case 2:m.a.toast("删除成功"),setTimeout(function(){s.fetch()},700);case 4:case"end":return t.stop()}},_callee2,t)})),function(e){return a.apply(this,arguments)}),s.wxAddress=function(){r.a.navigateTo({"url":"/pages/member/edit-address?isWechatAddress=true"})},s.state={"list":[],"isPicker":!1,"selectedId":null},s}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AddressIndex,r["a"].Component),p(AddressIndex,[{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"componentDidShow","value":function componentDidShow(){this.fetch()}},{"key":"fetch","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e,t,n;return regeneratorRuntime.wrap(function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:return this.$router.params.isPicker&&this.setState({"isPicker":!0}),Object(s.b)({"mask":!0}),a.next=4,f.a.member.addressList();case 4:e=a.sent,t=e.list,Object(s.a)(),n=null,n=this.props.address?this.props.address[h]:t.find(function(e){return e.is_def>0})||null,this.setState({"list":t,"selectedId":n});case 10:case"end":return a.stop()}},_callee3,this)}));return function fetch(){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){var e=this,t=this.state,n=t.selectedId,a=(t.isItemChecked,t.isPicker),r=t.list;return i.a.createElement(o.a,{"className":"page-address-index"},null,i.a.createElement(o.a,{"className":"member-address-list"},r.map(function(t,r){return i.a.createElement(o.a,{"key":t[h],"className":"address-item"},a&&i.a.createElement(o.a,{"className":"address-item__check","onClick":e.handleClickChecked.bind(e,t)},t[h]===n?i.a.createElement(d.a,{"className":"in-icon in-icon-check address-item__checked"}):i.a.createElement(d.a,{"className":"address-item__unchecked"}," ")),i.a.createElement(o.a,{"className":"address-item__content"},i.a.createElement(o.a,{"className":"address-item__title"},i.a.createElement(d.a,{"className":"address-item__info"},t.username),i.a.createElement(d.a,{"className":"address-item__info"},t.telephone)),i.a.createElement(o.a,{"className":"address-item__detail"},t.province,t.city,t.county,t.adrdetail),i.a.createElement(o.a,{"className":"address-item__footer"},i.a.createElement(o.a,{"className":"address-item__footer_default","onClick":e.handleChangeDefault.bind(e,t)},t.is_def?i.a.createElement(d.a,{"className":"in-icon in-icon-check default__icon default__checked"}," "):i.a.createElement(d.a,{"className":"in-icon in-icon-check default__icon"}," "),i.a.createElement(d.a,{"className":"default-text"},"设为默认")),i.a.createElement(o.a,{"className":"address-item__footer_edit"},i.a.createElement(o.a,{"className":"footer-text","onClick":e.handleClickToEdit.bind(e,t)},i.a.createElement(d.a,{"className":"in-icon in-icon-edit footer-icon"}," "),i.a.createElement(d.a,null,"编辑")),i.a.createElement(o.a,{"className":"footer-text","onClick":e.handleDelete.bind(e,t)},i.a.createElement(d.a,{"className":"in-icon in-icon-trash footer-icon"}," "),i.a.createElement(d.a,null,"删除"))))))})),i.a.createElement(o.a,{"className":"member-address-add","onClick":this.handleClickToEdit.bind(this)},"添加新地址"),i.a.createElement(u.s,null))}}]),AddressIndex}())||a}}]);