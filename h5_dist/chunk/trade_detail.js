(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{"405":function(e,t,n){"use strict";var r=n(4),a=n.n(r),o=n(3),i=n(735),s=n(455),c=n(546),l=n(349),u=n.n(l),d=n(45),f=n.n(d),p=n(348),m=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var _=function(e){function AtLoading(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtLoading),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtLoading.__proto__||Object.getPrototypeOf(AtLoading)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtLoading,p["a"]),m(AtLoading,[{"key":"render","value":function render(){var e=this.props,t=e.color,n=e.size,r={"width":n?""+o.a.pxTransform(parseInt(n)):"","height":n?""+o.a.pxTransform(parseInt(n)):""},s={"border":t?"1px solid "+t:"","border-color":t?t+" transparent transparent transparent":""},c=Object.assign({},s,r);return a.a.createElement(i.a,{"className":"at-loading","style":r},a.a.createElement(i.a,{"className":"at-loading__ring","style":c}),a.a.createElement(i.a,{"className":"at-loading__ring","style":c}),a.a.createElement(i.a,{"className":"at-loading__ring","style":c}))}}]),AtLoading}();_.defaultProps={"size":0,"color":""},_.propTypes={"size":u.a.oneOfType([u.a.string,u.a.number]),"color":u.a.oneOfType([u.a.string,u.a.number])},n.d(t,"a",function(){return v});var h=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{"value":n,"enumerable":!0,"configurable":!0,"writable":!0}):e[t]=n,e}var y={"normal":"normal","small":"small"},b={"primary":"primary","secondary":"secondary"},v=function(e){function AtButton(){!function button_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtButton);var e=function button_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtButton.__proto__||Object.getPrototypeOf(AtButton)).apply(this,arguments));return e.state={"isWEB":o.a.getEnv()===o.a.ENV_TYPE.WEB,"isWEAPP":o.a.getEnv()===o.a.ENV_TYPE.WEAPP,"isALIPAY":o.a.getEnv()===o.a.ENV_TYPE.ALIPAY},e}return function button_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtButton,p["a"]),h(AtButton,[{"key":"onClick","value":function onClick(){var e;this.props.disabled||this.props.onClick&&(e=this.props).onClick.apply(e,arguments)}},{"key":"onGetUserInfo","value":function onGetUserInfo(){var e;this.props.onGetUserInfo&&(e=this.props).onGetUserInfo.apply(e,arguments)}},{"key":"onContact","value":function onContact(){var e;this.props.onContact&&(e=this.props).onContact.apply(e,arguments)}},{"key":"onGetPhoneNumber","value":function onGetPhoneNumber(){var e;this.props.onGetPhoneNumber&&(e=this.props).onGetPhoneNumber.apply(e,arguments)}},{"key":"onError","value":function onError(){var e;this.props.onError&&(e=this.props).onError.apply(e,arguments)}},{"key":"onOpenSetting","value":function onOpenSetting(){var e;this.props.onOpenSetting&&(e=this.props).onOpenSetting.apply(e,arguments)}},{"key":"onSumit","value":function onSumit(){this.state.isWEAPP&&this.$scope.triggerEvent("submit",arguments[0].detail,{"bubbles":!0,"composed":!0})}},{"key":"onReset","value":function onReset(){this.state.isWEAPP&&this.$scope.triggerEvent("reset",arguments[0].detail,{"bubbles":!0,"composed":!0})}},{"key":"render","value":function render(){var e,t=this.props,n=t.size,r=void 0===n?"normal":n,o=t.type,l=void 0===o?"":o,u=t.circle,d=t.full,p=t.loading,m=t.disabled,h=t.customStyle,v=t.formType,E=t.openType,g=t.lang,C=t.sessionFrom,w=t.sendMessageTitle,O=t.sendMessagePath,P=t.sendMessageImg,k=t.showMessageCard,T=t.appParameter,N=this.state,A=N.isWEAPP,S=N.isALIPAY,j=["at-button"],x=(_defineProperty(e={},"at-button--"+y[r],y[r]),_defineProperty(e,"at-button--disabled",m),_defineProperty(e,"at-button--"+l,b[l]),_defineProperty(e,"at-button--circle",u),_defineProperty(e,"at-button--full",d),e),R="primary"===l?"#fff":"",I="small"===r?"30":0,D=void 0;p&&(D=a.a.createElement(i.a,{"className":"at-button__icon"},a.a.createElement(_,{"color":R,"size":I})),j.push("at-button--icon"));var M=a.a.createElement(s.a,{"className":"at-button__wxbutton","formType":v,"openType":E,"lang":g,"sessionFrom":C,"sendMessageTitle":w,"sendMessagePath":O,"sendMessageImg":P,"showMessageCard":k,"appParameter":T,"onGetUserInfo":this.onGetUserInfo.bind(this),"onGetPhoneNumber":this.onGetPhoneNumber.bind(this),"onOpenSetting":this.onOpenSetting.bind(this),"onError":this.onError.bind(this),"onContact":this.onContact.bind(this)});return a.a.createElement(i.a,{"className":f()(j,x,this.props.className),"style":h,"onClick":this.onClick.bind(this)},A&&!m&&a.a.createElement(c.a,{"reportSubmit":!0,"onSubmit":this.onSumit.bind(this),"onReset":this.onReset.bind(this)},M),S&&!m&&M,D,a.a.createElement(i.a,{"className":"at-button__text"},this.props.children))}}]),AtButton}();v.defaultProps={"size":"normal","type":"","circle":!1,"full":!1,"loading":!1,"disabled":!1,"customStyle":{},"onClick":function onClick(){},"formType":"","openType":"","lang":"en","sessionFrom":"","sendMessageTitle":"","sendMessagePath":"","sendMessageImg":"","showMessageCard":!1,"appParameter":"","onGetUserInfo":function onGetUserInfo(){},"onContact":function onContact(){},"onGetPhoneNumber":function onGetPhoneNumber(){},"onError":function onError(){},"onOpenSetting":function onOpenSetting(){}},v.propTypes={"size":u.a.oneOf(["normal","small"]),"type":u.a.oneOf(["primary","secondary",""]),"circle":u.a.bool,"full":u.a.bool,"loading":u.a.bool,"disabled":u.a.bool,"onClick":u.a.func,"customStyle":u.a.oneOfType([u.a.object,u.a.string]),"formType":u.a.oneOf(["submit","reset",""]),"openType":u.a.oneOf(["contact","share","getUserInfo","getPhoneNumber","launchApp","openSetting","feedback","getRealnameAuthInfo",""]),"lang":u.a.string,"sessionFrom":u.a.string,"sendMessageTitle":u.a.string,"sendMessagePath":u.a.string,"sendMessageImg":u.a.string,"showMessageCard":u.a.bool,"appParameter":u.a.string,"onGetUserInfo":u.a.func,"onContact":u.a.func,"onGetPhoneNumber":u.a.func,"onError":u.a.func,"onOpenSetting":u.a.func}},"419":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r,a,o=n(3),i=n(4),s=n.n(i),c=n(735),l=n(475),u=n(416),d=n(352),f=(n(420),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());var p=(a=r=function(e){function OrderItem(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OrderItem),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(OrderItem.__proto__||Object.getPrototypeOf(OrderItem)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(OrderItem,o["a"].Component),f(OrderItem,[{"key":"render","value":function render(){var e=this.props,t=e.info,n=e.onClick,r=e.payType,a=e.showExtra,o=e.customFooter;if(!t)return null;var i=t.pic_path?t.pic_path:Array.isArray(t.pics)?t.pics[0]:t.pics;return s.a.createElement(c.a,{"className":"order-item","onClick":n},s.a.createElement(c.a,{"className":"order-item__hd"},s.a.createElement(l.a,{"mode":"aspectFill","className":"order-item__img","src":i})),s.a.createElement(c.a,{"className":"order-item__bd"},s.a.createElement(u.a,{"className":"order-item__title"},t.title),this.props.renderDesc,a&&s.a.createElement(c.a,{"className":"order-item__extra"},s.a.createElement(u.a,{"className":"order-item__desc"},t.goods_props),t.num&&s.a.createElement(u.a,{"className":"order-item__num"},"数量：",t.num))),o?this.props.renderFooter:s.a.createElement(c.a,{"className":"order-item__ft"},"point"===r?s.a.createElement(d.l,{"className":"order-item__price","appendText":"积分","noSymbol":!0,"noDecimal":!0,"value":t.point}):s.a.createElement(d.l,{"className":"order-item__price","value":t.price}),s.a.createElement(u.a,{"className":"order-item__pay-type"},"dhpoint"===r?"积分支付":"微信支付")))}}]),OrderItem}(),r.defaultProps={"onClick":function onClick(){},"payType":"","showExtra":!0,"info":null},r.options={"addGlobalClass":!0},a)},"420":function(e,t,n){},"467":function(e,t,n){"use strict";t.byteLength=function byteLength(e){var t=getLens(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function toByteArray(e){for(var t,n=getLens(e),r=n[0],i=n[1],s=new o(function _byteLength(e,t,n){return 3*(t+n)/4-n}(0,r,i)),c=0,l=i>0?r-4:r,u=0;u<l;u+=4)t=a[e.charCodeAt(u)]<<18|a[e.charCodeAt(u+1)]<<12|a[e.charCodeAt(u+2)]<<6|a[e.charCodeAt(u+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;2===i&&(t=a[e.charCodeAt(u)]<<2|a[e.charCodeAt(u+1)]>>4,s[c++]=255&t);1===i&&(t=a[e.charCodeAt(u)]<<10|a[e.charCodeAt(u+1)]<<4|a[e.charCodeAt(u+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t);return s},t.fromByteArray=function fromByteArray(e){for(var t,n=e.length,a=n%3,o=[],i=0,s=n-a;i<s;i+=16383)o.push(encodeChunk(e,i,i+16383>s?s:i+16383));1===a?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===a&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=i.length;s<c;++s)r[s]=i[s],a[i.charCodeAt(s)]=s;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function encodeChunk(e,t,n){for(var a,o,i=[],s=t;s<n;s+=3)a=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(r[(o=a)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return i.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},"481":function(e,t,n){"use strict";var r=n(4),a=n.n(r),o=n(349),i=n.n(o),s=n(735),c=n(45),l=n.n(c),u=n(348),d=n(416),f=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var p=function(e){function AtCountdownItem(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtCountdownItem),function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtCountdownItem.__proto__||Object.getPrototypeOf(AtCountdownItem)).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtCountdownItem,u["a"]),f(AtCountdownItem,[{"key":"formatNum","value":function formatNum(e){return e<=9?"0"+e:""+e}},{"key":"render","value":function render(){var e=this.props,t=e.num,n=e.separator;return a.a.createElement(s.a,{"className":"at-countdown__item"},a.a.createElement(s.a,{"className":"at-countdown__time-box"},a.a.createElement(d.a,{"className":"at-countdown__time"},this.formatNum(t))),a.a.createElement(d.a,{"className":"at-countdown__separator"},n))}}]),AtCountdownItem}();p.defaultProps={"num":0,"separator":":"},p.propTypes={"num":i.a.number.isRequired,"separator":i.a.string};var m=p;n.d(t,"a",function(){return y});var _=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();var h=function toSeconds(e,t,n,r){return 60*e*60*24+60*t*60+60*n+r},y=function(e){function AtCountdown(){!function countdown_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AtCountdown);var e=function countdown_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(AtCountdown.__proto__||Object.getPrototypeOf(AtCountdown)).apply(this,arguments)),t=e.props,n=t.day,r=t.hours,a=t.minutes,o=t.seconds;return e.seconds=h(n,r,a,o),e.state={"_day":n,"_hours":r,"_minutes":a,"_seconds":o},e.timer=null,e}return function countdown_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(AtCountdown,u["a"]),_(AtCountdown,[{"key":"setTimer","value":function setTimer(){this.timer||this.countdonwn()}},{"key":"clearTimer","value":function clearTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{"key":"countdonwn","value":function countdonwn(){var e=this,t=0,n=0,r=0,a=0;if(this.seconds>0&&(t=Math.floor(this.seconds/86400),n=Math.floor(this.seconds/3600)-24*t,r=Math.floor(this.seconds/60)-24*t*60-60*n,a=Math.floor(this.seconds)-24*t*60*60-60*n*60-60*r),this.setState({"_day":t,"_hours":n,"_minutes":r,"_seconds":a}),this.seconds--,this.seconds<0)return this.clearTimer(),void this.props.onTimeUp();this.timer=setTimeout(function(){e.countdonwn()},1e3)}},{"key":"componentWillReceiveProps","value":function componentWillReceiveProps(e){if(JSON.stringify(this.props)!==JSON.stringify(e)){var t=e.day,n=e.hours,r=e.minutes,a=e.seconds;this.seconds=h(t,n,r,a),this.clearTimer(),this.setTimer()}}},{"key":"componentDidMount","value":function componentDidMount(){this.setTimer()}},{"key":"componentWillUnmount","value":function componentWillUnmount(){this.clearTimer()}},{"key":"componentDidHide","value":function componentDidHide(){this.clearTimer()}},{"key":"componentDidShow","value":function componentDidShow(){this.setTimer()}},{"key":"render","value":function render(){var e=this.props,t=e.className,n=e.customStyle,r=e.format,o=e.isShowDay,i=e.isCard,c=this.state,u=c._day,d=c._hours,f=c._minutes,p=c._seconds;return a.a.createElement(s.a,{"className":l()({"at-countdown":!0,"at-countdown--card":i},t),"style":n},o&&a.a.createElement(m,{"num":u,"separator":r.day}),a.a.createElement(m,{"num":d,"separator":r.hours}),a.a.createElement(m,{"num":f,"separator":r.minutes}),a.a.createElement(m,{"num":p,"separator":r.seconds}))}}]),AtCountdown}();y.defaultProps={"customStyle":"","className":"","isCard":!1,"isShowDay":!1,"format":{"day":"天","hours":"时","minutes":"分","seconds":"秒"},"day":0,"hours":0,"minutes":0,"seconds":0,"onTimeUp":function onTimeUp(){}},y.propTypes={"customStyle":i.a.oneOfType([i.a.object,i.a.string]),"className":i.a.oneOfType([i.a.array,i.a.string]),"isCard":i.a.bool,"isShowDay":i.a.bool,"format":i.a.object,"day":i.a.number,"hours":i.a.number,"minutes":i.a.number,"seconds":i.a.number,"onTimeUp":i.a.func}},"504":function(e,t,n){"use strict";n.d(t,"a",function(){return makePhoneCall});n(467);var r=n(0);function makePhoneCall(e){var t=Object(r.h)(e);if(!t.res){var n={"errMsg":"makePhoneCall"+t.msg};return console.error(n.errMsg),Promise.reject(n)}var a=e.phoneNumber,o=e.success,i=e.fail,s=e.complete,c={"errMsg":"makePhoneCall:ok"};return"string"!=typeof a?(c.errMsg=Object(r.b)({"name":"makePhoneCall","para":"phoneNumber","correct":"String","wrong":a}),console.error(c.errMsg),"function"==typeof i&&i(c),"function"==typeof s&&s(c),Promise.reject(c)):(window.location.href="tel:"+a,"function"==typeof o&&o(c),"function"==typeof s&&s(c),Promise.resolve(c))}},"715":function(e,t,n){},"717":function(e,t,n){},"816":function(e,t,n){"use strict";n.r(t);var r,a,o=n(22),i=n(344),s=n(346),c=n(3),l=n(504),u=n(4),d=n.n(u),f=n(735),p=n(416),m=n(481),_=n(405),h=n(352),y=n(14),b=n(6),v=n(17),E=n(419),g=(n(715),function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}());function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=(a=r=function(e){function DetailItem(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DetailItem);for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=n=_possibleConstructorReturn(this,(e=DetailItem.__proto__||Object.getPrototypeOf(DetailItem)).call.apply(e,[this].concat(a))),n.handleClickAfterSale=function(e){var t=n.props.info.tid;e.aftersales_status&&"SELLER_REFUSE_BUYER"!==e.aftersales_status?c.a.navigateTo({"url":"/pages/trade/refund-detail?order_id="+t+"&item_id="+e.item_id}):c.a.navigateTo({"url":"/pages/trade/refund?order_id="+t+"&item_id="+e.item_id})},_possibleConstructorReturn(n,t)}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(DetailItem,c["a"].Component),g(DetailItem,[{"key":"render","value":function render(){var e=this,t=this.props,n=(t.customHeader,t.customFooter),r=(t.noHeader,t.onClick,t.info);t.showActions;return d.a.createElement(f.a,{"className":"detail-item"},r.orders.map(function(t,a){return d.a.createElement(f.a,{"className":"detail-item-good","key":a},d.a.createElement(p.a,{"className":"detail-item__title"},"第",a+1,"件商品"),d.a.createElement(E.a,{"key":a,"info":t}),!n&&"dhpoint"!==r.pay_type&&("TRADE_SUCCESS"===r.status||"WAIT_BUYER_CONFIRM_GOODS"===r.status)&&d.a.createElement(f.a,{"className":"order-item__ft"},d.a.createElement(_.a,{"circle":!0,"type":"primary","size":"small","onClick":e.handleClickAfterSale.bind(e,t)},t.aftersales_status&&"SELLER_REFUSE_BUYER"!==t.aftersales_status?"售后详情":"申请售后")))}))}}]),DetailItem}(),r.options={"addGlobalClass":!0},r.defaultProps={"customFooter":!1},a);n(717);n.d(t,"default",function(){return O});var w=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}();function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function step(r,a){try{var o=t[r](a),i=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(i).then(function(e){step("next",e)},function(e){step("throw",e)});e(i)}("next")})}}var O=function(e){function TradeDetail(e){var t=this;!function detail_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TradeDetail);var n=function detail_possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(TradeDetail.__proto__||Object.getPrototypeOf(TradeDetail)).call(this,e));return n.handleCopy=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,r;return regeneratorRuntime.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return e=n.state.info,r="收货人："+e.receiver_name+" "+e.receiver_mobile+"\n收货地址："+e.receiver_state+e.receiver_city+e.receiver_district+e.receiver_address+"\n订单编号："+e.tid+"\n创建时间："+e.created_time_str+"\n",t.next=4,Object(y.d)(r);case 4:case"end":return t.stop()}},_callee,t)})),n.handleClickDelivery=function(){},n.handleClickToDelivery=function(){},n.handleClickCopy=function(e){Object(y.d)(e),v.a.toast("复制成功")},n.countDownEnd=function(){n.fetch()},n.state={"info":null,"timer":null,"payLoading":!1,"sessionFrom":""},n}return function detail_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(TradeDetail,c["a"].Component),w(TradeDetail,[{"key":"componentDidShow","value":function componentDidShow(){this.fetch()}},{"key":"calcTimer","value":function calcTimer(e){var t=e,n=Math.floor(e/24/3600);t-=3600*n*24;var r=Math.floor(t/3600);t-=3600*r;var a=Math.floor(t/60);return t-=60*a,{"dd":n,"hh":r,"mm":a,"ss":Math.floor(t)}}},{"key":"fetch","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var e,t,n,r,a,i;return regeneratorRuntime.wrap(function _callee2$(s){for(;;)switch(s.prev=s.next){case 0:return e=this.$router.params.id,s.next=3,b.a.trade.detail(e);case 3:t=s.sent,n="",r=Object(y.q)(t.orderInfo,{"tid":"order_id","created_time_str":function created_time_str(e){var t=e.create_time;return Object(y.f)(1e3*t)},"auto_cancel_seconds":"auto_cancel_seconds","receiver_name":"receiver_name","receiver_mobile":"receiver_mobile","receiver_state":"receiver_state","discount_fee":function discount_fee(e){return(+e.discount_fee/100).toFixed(2)},"receiver_city":"receiver_city","receiver_district":"receiver_district","receiver_address":"receiver_address","status_desc":"order_status_msg","delivery_code":"delivery_code","delivery_corp":"delivery_corp","order_type":"order_type","order_status_msg":"order_status_msg","order_status_des":"order_status_des","item_fee":function item_fee(e){return(+e.item_fee/100).toFixed(2)},"coupon_discount":function coupon_discount(e){return(+e.coupon_discount/100).toFixed(2)},"freight_fee":function freight_fee(e){return(+e.freight_fee/100).toFixed(2)},"payment":function payment(e){var t=e.pay_type,n=e.total_fee;return"dhpoint"===t?Math.floor(n):(+n/100).toFixed(2)},"pay_type":"pay_type","invoice_content":"invoice.content","point":"point","status":function status(e){var t=e.order_status;return Object(y.r)(t)},"orders":function orders(e){var t=e.items;return Object(y.q)(t,{"order_id":"order_id","item_id":"item_id","aftersales_status":"aftersales_status","pic_path":"pic","title":"item_name","delivery_status":"delivery_status","price":function price(e){return(+e.item_fee/100).toFixed(2)},"point":"item_point","num":"num"})}}),a=null,r.auto_cancel_seconds&&(a=this.calcTimer(r.auto_cancel_seconds),this.setState({"timer":a})),i=(r.status||"").toLowerCase(),r.auto_cancel_seconds<=0&&"NOTPAY"===r.order_status_des&&(r.status="TRADE_CLOSED",r.order_status_msg="已取消"),r.status_img="ico_"+("trade_success"===i?"wait_rate":i)+".png",y.m.debug("[trade info] info: ",r),n+="{",Object(o.b)("userinfo")&&(n+='"nickName": "'+Object(o.b)("userinfo").username+'", '),n+='"商品": "'+r.orders[0].title+'"',n+='"订单号": "'+r.orders[0].order_id+'"',n+="}",this.setState({"info":r,"sessionFrom":n});case 18:case"end":return s.stop()}},_callee2,this)}));return function fetch(){return e.apply(this,arguments)}}()},{"key":"handlePay","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var e,t,n,r,a,o,l,u,d;return regeneratorRuntime.wrap(function _callee3$(f){for(;;)switch(f.prev=f.next){case 0:return e=this.state.info,this.setState({"payLoading":!0}),t=e.tid,n=e.order_type,r={"pay_type":"wxpay","order_id":t,"order_type":n},f.next=6,b.a.cashier.getPayment(r);case 6:return a=f.sent,this.setState({"payLoading":!1}),o=void 0,f.prev=9,f.next=12,Object(i.k)(a);case 12:l=f.sent,y.m.debug("[order pay]: ",l),f.next=20;break;case 16:f.prev=16,f.t0=f.catch(9),o=f.t0,f.t0.errMsg.indexOf("cancel")<0&&Object(s.d)({"title":f.t0.err_desc||f.t0.errMsg||"支付失败","icon":"none"});case 20:if(o){f.next=25;break}return f.next=23,Object(s.d)({"title":"支付成功","icon":"success"});case 23:u=Object(y.g)(this.$router),d=u.fullPath,c.a.redirectTo({"url":d});case 25:case"end":return f.stop()}},_callee3,this,[[9,16]])}));return function handlePay(){return e.apply(this,arguments)}}()},{"key":"handleClickBtn","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){var t,n,r,a;return regeneratorRuntime.wrap(function _callee4$(o){for(;;)switch(o.prev=o.next){case 0:if(t=this.state.info,"home"!==e){o.next=4;break}return c.a.redirectTo({"url":"/pages/index"}),o.abrupt("return");case 4:if("contact"===e&&Object(l.a)({"phoneNumber":"021-61255625"}),"pay"!==e){o.next=9;break}return o.next=8,this.handlePay();case 8:return o.abrupt("return");case 9:if("cancel"!==e){o.next=12;break}return c.a.navigateTo({"url":"/pages/trade/cancel?order_id="+t.tid}),o.abrupt("return");case 12:if("confirm"!==e){o.next=23;break}return o.next=15,Object(s.c)({"title":"确认收货？","content":""});case 15:if(n=o.sent,!n.confirm){o.next=22;break}return o.next=20,b.a.trade.confirm(t.tid);case 20:r=Object(y.g)(this.$router),a=r.fullPath,c.a.redirectTo({"url":a});case 22:return o.abrupt("return");case 23:case"end":return o.stop()}},_callee4,this)}));return function handleClickBtn(t){return e.apply(this,arguments)}}()},{"key":"handleClickRefund","value":function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(e,t){var n;return regeneratorRuntime.wrap(function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:n=this.state.info.tid,"refund"===e?c.a.navigateTo({"url":"/pages/trade/refund?order_id="+n+"&item_id="+t}):"refundDetail"===e&&c.a.navigateTo({"url":"/pages/trade/refund-detail?order_id="+n+"&item_id="+t});case 2:case"end":return r.stop()}},_callee5,this)}));return function handleClickRefund(t,n){return e.apply(this,arguments)}}()},{"key":"render","value":function render(){var e=this.state,t=e.info,n=e.timer,r=e.payLoading;if(!t)return d.a.createElement(h.j,null);var a="dhpoint"===t.pay_type;return d.a.createElement(f.a,{"className":"trade-detail"},d.a.createElement(h.k,{"title":"订单详情","leftIconType":"chevron-left","fixed":"true"}),"WAIT_BUYER_PAY"===t.status&&d.a.createElement(f.a,{"className":Object(y.c)("trade-detail-header","trade-detail-header__waitpay")},d.a.createElement(f.a,null,"该订单将为您保留",d.a.createElement(m.a,{"format":{"hours":":","minutes":":","seconds":""},"hours":n.hh,"minutes":n.mm,"seconds":n.ss,"onTimeUp":this.countDownEnd.bind(this)}),"分钟")),"WAIT_BUYER_PAY"!==t.status&&d.a.createElement(f.a,{"className":Object(y.c)("trade-detail-header")},d.a.createElement(f.a,{"className":"trade-detail-waitdeliver"},d.a.createElement(f.a,null),d.a.createElement(f.a,{"className":"delivery-infos"},d.a.createElement(f.a,{"className":"delivery-infos__status"},d.a.createElement(p.a,{"className":"delivery-infos__text text-status"},t.order_status_msg),d.a.createElement(p.a,{"className":"delivery-infos__text"},"WAIT_SELLER_SEND_GOODS"===t.status?"正在审核订单":null,"WAIT_BUYER_CONFIRM_GOODS"===t.status?"正在派送中":null,"TRADE_CLOSED"===t.status?"订单已取消":null,"TRADE_SUCCESS"===t.status?"物流单号："+t.delivery_code:null))))),d.a.createElement(f.a,{"className":"trade-detail-address","onClick":this.handleClickDelivery.bind(this)},d.a.createElement(f.a,{"className":"address-receive"},d.a.createElement(p.a,null,"收货地址："),d.a.createElement(f.a,{"className":"info-trade"},d.a.createElement(f.a,{"className":"user-info-trade"},d.a.createElement(p.a,null,t.receiver_name),d.a.createElement(p.a,null,t.receiver_mobile)),d.a.createElement(p.a,{"className":"address-detail"},t.receiver_state,t.receiver_city,t.receiver_district,t.receiver_address)))),d.a.createElement(f.a,{"className":"trade-detail-goods"},d.a.createElement(C,{"info":t})),d.a.createElement(f.a,{"className":"trade-money"},"总计：",d.a.createElement(p.a,{"className":"trade-money__num"},"￥",t.item_fee)),d.a.createElement(f.a,{"className":"trade-detail-info"},d.a.createElement(p.a,{"className":"info-text"},"订单号：",t.tid),d.a.createElement(p.a,{"className":"info-text"},"下单时间：",t.created_time_str),t.invoice_content?d.a.createElement(p.a,{"className":"info-text"},"发票信息：",t.invoice_content):null,d.a.createElement(p.a,{"className":"info-text"},"商品金额：￥",t.item_fee),d.a.createElement(p.a,{"className":"info-text"},"运费：￥",t.freight_fee),d.a.createElement(p.a,{"className":"info-text"},"优惠：-￥",t.discount_fee),a?d.a.createElement(p.a,{"className":"info-text","space":!0},"支付：",t.payment," "," 积分支付"):d.a.createElement(p.a,{"className":"info-text","space":!0},"支付：￥",t.payment," "," 微信支付"),t.delivery_code?d.a.createElement(f.a,{"className":"delivery_code_copy"},d.a.createElement(p.a,{"className":"info-text"},"物流单号：",t.delivery_code),d.a.createElement(p.a,{"className":"info-text","onClick":this.handleClickCopy.bind(this,t.delivery_code)},"复制")):null),!a&&"WAIT_BUYER_PAY"===t.status&&d.a.createElement(f.a,{"className":"trade-detail__footer"},d.a.createElement(p.a,{"className":"trade-detail__footer__btn","onClick":this.handleClickBtn.bind(this,"cancel")},"取消订单"),d.a.createElement(_.a,{"className":"trade-detail__footer__btn trade-detail__footer_active","type":"primary","loading":r,"onClick":this.handleClickBtn.bind(this,"pay")},"立即支付")),a&&"WAIT_BUYER_PAY"===t.status&&d.a.createElement(f.a,{"className":"trade-detail__footer"},d.a.createElement(_.a,{"className":"trade-detail__footer__btn trade-detail__footer__btn-inline trade-detail__footer_active","type":"primary","loading":r,"onClick":this.handleClickBtn.bind(this,"pay")},"立即支付")),!a&&"WAIT_SELLER_SEND_GOODS"===t.status&&d.a.createElement(f.a,{"className":"trade-detail__footer"},"PAYED_WAIT_PROCESS"!==t.order_status_des&&d.a.createElement(p.a,{"className":"trade-detail__footer__btn","onClick":this.handleClickBtn.bind(this,"cancel")},"取消订单"),d.a.createElement(p.a,{"className":"trade-detail__footer__btn trade-detail__footer_active "+("PAYED_WAIT_PROCESS"===t.order_status_des?"trade-detail__footer_allWidthBtn":"")+" ","onClick":this.handleClickBtn.bind(this,"home")},"继续购物")),a&&"WAIT_SELLER_SEND_GOODS"===t.status&&d.a.createElement(f.a,{"className":"trade-detail__footer"},d.a.createElement(p.a,{"className":"trade-detail__footer__btn trade-detail__footer__btn-inline trade-detail__footer_active","onClick":this.handleClickBtn.bind(this,"home")},"继续购物")),"WAIT_BUYER_CONFIRM_GOODS"===t.status&&d.a.createElement(f.a,{"className":"trade-detail__footer"},"/* ",d.a.createElement(p.a,{"className":"trade-detail__footer__btn","onClick":this.handleClickBtn.bind(this,"contact")},"联系客服")," */",d.a.createElement(p.a,{"className":"trade-detail__footer__btn trade-detail__footer_active","onClick":this.handleClickBtn.bind(this,"confirm")},"确认收货")),"TRADE_SUCCESS"===t.status&&d.a.createElement(f.a,{"className":"trade-detail__footer"},d.a.createElement(p.a,{"className":"trade-detail__footer__btn trade-detail__footer_active trade-detail__footer_allWidthBtn","onClick":this.handleClickBtn.bind(this,"contact")},"联系客服")),d.a.createElement(h.f,null,d.a.createElement(h.e,{"iconPrefixClass":"in-icon","icon":"kefu","openType":"contact"})),d.a.createElement(h.s,null))}},{"key":"componentDidMount","value":function componentDidMount(){}}]),TradeDetail}()}}]);